<!-- edit_booking.html -->
<!DOCTYPE html>
<html>
<head>
    <title>Edit Booking</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h2>Edit Booking</h2>

    <form method="POST" action="/edit_booking/{{ booking.id }}">
        <label>Date:</label>
        <input type="date" name="date" value="{{ booking.date }}" required><br><br>

        <label>Start Time:</label>
        <input type="time" name="start_time" value="{{ booking.start_time }}" required><br><br>

        <label>End Time:</label>
        <input type="time" name="end_time" value="{{ booking.end_time }}" required><br><br>

        <button type="submit">Update Booking</button>
    </form>
    {% if message %}
      <p class="message {% if 'âœ…' in message %}success{% else %}error{% endif %}">
        {{ message }}
      </p>
    {% endif %}
    <a href="/history">Back to History</a>
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
      const dateInput = document.getElementById("date");
      const startInput = document.getElementById("start_time");

      const setMinStartTime = () => {
        const today = new Date().toISOString().split("T")[0];
        const selectedDate = dateInput.value;

        if (selectedDate === today) {
          const now = new Date();
          const hours = String(now.getHours()).padStart(2, '0');
          const minutes = String(now.getMinutes()).padStart(2, '0');
          startInput.min = `${hours}:${minutes}`;
        } else {
          startInput.removeAttribute("min");
        }
      };

      dateInput.addEventListener("change", setMinStartTime);
      setMinStartTime(); // Initial trigger on load
    });
  </script>

</body>
</html>
