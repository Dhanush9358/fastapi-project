<!DOCTYPE html>
<html>
<head>
  <title>Booking History</title>
  <link rel="stylesheet" href="/static/style.css">
  <style>
    .action-buttons {
      margin-top: 5px;
    }
    .edit-btn, .cancel-btn {
      padding: 4px 8px;
      font-size: 14px;
      border-radius: 5px;
      border: none;
      cursor: pointer;
    }
    .edit-btn {
      background-color: #4CAF50;
      color: white;
    }
    .cancel-btn {
      background-color: #f44336;
      color: white;
      margin-left: 5px;
    }
    .edit-btn:hover { background-color: #45a049; }
    .cancel-btn:hover { background-color: #e53935; }
    .available { color: green; }
    .booked { color: red; }
  </style>
</head>
<body>

  {% if request.cookies.access_token %}
    <a href="/logout" class="logout-link">Logout</a>
  {% endif %}

  <div class="container">
    <h2>Your Bookings</h2>

    {% if bookings %}
      <table class="booking-table">
        <tr>
          <th>Name</th>
          <th>Room</th>
          <th>Date</th>
          <th>Time</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
        {% for booking in bookings %}
          <tr>
            <td>{{ booking.name }}</td>
            <td>{{ booking.room_number }}</td>
            <td>{{ booking.date }}</td>
            <td>{{ booking.start_time }} to {{ booking.end_time }}</td>
            <td class="{{ 'available' if booking.available else 'booked' }}">
              {{ 'Available' if booking.available else 'Booked' }}
            </td>
            <td>
              {% if booking.is_future %}
                <div class="action-buttons">
                  <a href="/edit_booking/{{ booking.id }}">
                    <button class="edit-btn">Edit</button>
                  </a>
                  <a href="/cancel_booking/{{ booking.id }}" onclick="return confirm('Are you sure you want to cancel this booking?');">
                    <button class="cancel-btn">Cancel</button>
                  </a>
                </div>
              {% else %}
                â€”
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </table>
    {% else %}
      <p>No bookings found.</p>
    {% endif %}

    <a href="/book" class="back-link">Book Another Room</a>
  </div>

</body>
</html>
