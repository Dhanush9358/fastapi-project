<!DOCTYPE html>
<html>
<head>
    <title>Booking History</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
<div class="container">
    <h2>Your Bookings</h2>

    {% if warning_message %}
        <p style="color: red; text-align: center; font-weight: bold;">{{ warning_message }}</p>
    {% endif %}

    <form method="get" action="/history" class="search-form">
        <input type="date" name="date" value="{{ date }}" placeholder="Select Date">
        <input type="time" name="start_time" value="{{ start_time }}" placeholder="Start Time">
        <input type="time" name="end_time" value="{{ end_time }}" placeholder="End Time">
        <button type="submit">Search</button>
    </form>

    <div class="bookings-wrapper">
        {% if bookings %}
            {% for booking in bookings %}
                <div class="booking-card {% if booking.is_expired %}past-booking{% endif %}"
                     data-start="{{ booking.date }}T{{ booking.start_time }}"
                     data-end="{{ booking.date }}T{{ booking.end_time }}">
                    <div class="booking-info">
                        <span class="room">Room {{ booking.room_number }}</span>
                        <span>üìÖ {{ booking.date }}</span>
                        <span>‚è∞ {{ booking.start_time }} to {{ booking.end_time }}</span>
                        {% if booking.is_expired %}
                            <span class="badge past">Past</span>
                        {% elif booking.date == current_date %}
                            <span class="badge today">Today</span>
                        {% else %}
                            <span class="badge upcoming">Upcoming</span>
                        {% endif %}
                    </div>
                    <div class="booking-actions">
                        {% if booking.can_edit %}
                            <a href="/edit_booking/{{ booking.id }}">
                                <button class="edit-btn">Edit</button>
                            </a>
                            <button class="delete-btn" data-booking-id="{{ booking.id }}">Delete</button>
                        {% endif %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="no-bookings">No bookings found</p>
        {% endif %}
    </div>

    <div class="back-link-wrapper" style="text-align:center;">
        <a href="/book" class="back-link">Book Another Room</a>
    </div>
</div>

<script src="/static/script.js"></script>
</body>
</html>
